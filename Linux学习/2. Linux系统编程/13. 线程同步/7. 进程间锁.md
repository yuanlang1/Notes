# 进程间锁

## 1. 进程间互斥锁`pthread_mutex`

### 1.1 如何实现进程间互斥

通过`pthread_mutex`实现进程间互斥，即在`pthread_mutex_init`初始化之前，修改其属性为进程间共享

```c
#include <pthread.h>

初始化进程间互斥锁
int pthread_mutexattr_init(pthread_mutexattr_t *attr);

设置属性
int pthread_mutexattr_setpshared(pthread_mutexattr_t *attr, int pshared);

pshared:
    线程锁：PTHREAD_PROCESS_PRIVATE
    进程锁：PTHREAD_PROCESS_SHARED
    默认情况是线程锁

销毁mutex属性对象
int pthread_mutexattr_destroy(pthread_mutexattr_t *attr);
```

例如：

```c
pthread_mutex_t mutex;
pthread_mutexattr_t mutexattr;

设置mutex属性
pthread_mutexattr_init(&mutexattr);
pthread_mutexattr_setpshard(&mutexattr, PTHREAD_PROCESS_SHARED);  设置为进程互斥

将互斥量属性设置为进程间互斥
pthread_mutex_init(&mutex, &mutexattr);
```
