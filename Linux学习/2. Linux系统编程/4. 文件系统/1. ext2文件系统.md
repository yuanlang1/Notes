# `ext2`文件系统

![文件系统](images/2023-09-11-22-17-18.png)

```Linux
1block=1024B
1block=8192bit

一个block组中： 超级块 + GDT(块组描述表) + 块位图 +  inode位图 +  inode table + 数据块

inode table：存放文件属性
inode bitmap：描述inode使用情况
块位图：描述整个group中块的使用情况
快组描述表： 描述当前group从第几个块开始是块位图，是inode位图等等

```

例如：

![文件](images/2023-09-11-22-31-25.png)

---

## 如何存储文件

```Linux
比如存储文件hello 

1. 向文件系统申请一个inode
2. 通过GDT找到inode bitmap的位置
3. 通过inode bitmap找到空闲的inode
4. 在inode table中的空闲inode里面保存文件属性和数据块指针(60B)
5. 当向文件中写数据，即向数据块指针指向的数据块写入数据
6. 数据块写入数据后，block bitmap中表示该数据块已经使用 
```

![文件存储](images/2023-09-11-22-59-51.png)

---

## 如何删除文件

```Linux
1. 将文件数据对应的block bitmap中的块标识翻转，将数据块释放掉
2. 将inode bitmap中将文件对应的inode标识翻转
```

---

## 目录中记录项文件类型

文件名没有存在`inode`里面
