# 第五章 存储器管理

---

## 1. 存储器的层次结构

- 存储器管理的主要对象是内存，外村主要存放文件即文件管理
- 存储器的层次结构
  - `CPU`寄存器：
    - 寄存器
  - 主存储器：
    - 高速存储
    - 主存储器
    - 磁盘缓存
  - 辅助存储器：
    - 固定磁盘
    - 可移动存储介质
- 可执行存储器：
  - 寄存器
  - 主存储器

---

## 2. 程序的装入和链接

- 过程：
  - 编译：对用户源程序进行编译，形成若干个目标模块
  - 链接：将目标模块和库函数链接在一起，形成完整的装入模块
  - 装入：加载，由装入程序将装入模块装入内存
- 地址绑定：
  - 逻辑地址(相对地址)：`CPU`生成的地址
  - 物理地址(绝对地址)：内存单元看到的地址(装入内存地址寄存器的地址)
- 内存保护：
  - 保证`OS`不被用于访问
  - 保证用户进程不会相互影响
- 程序的装入：
  - 绝对装入方式
  - 可重定位装入方式
    - 根据内存的具体情况，将装入模块装入内存的适当位置
    - 重定位：把在装入是目标程序中的指令和数据的逻辑地址变换为物理地址的过程
    - 静态重定位：进程装入时是一次性完成的，以后不再改变
    - 动态运行时装入方式：
      - 装入内存后，地址变化在程序真正运行时才进行
      - 静态重定位：运行时进行地址变换的重定位方式

---

## 3. 连续分配存储管理方式

- 单一连续分配：
  - 系统区仅供`OS`使用，放在内存的低址部分。用户区内存，仅装入一道程序
- 固定分区分配：
  - 将整个用户看见划分为若干个固定的分区
  - 固定分区使用表，记录分区的情况
- 动态分区分配：
  - 可变分区分配
  - 数据结构：
    - 空闲分区表
    - 空闲分区链
  - 分配算法：
    - 首次适应算法
    - 最佳适应算法
    - 循环首次适应算法
  - 回收内存
- 动态重定位分区分配
  - 紧凑：将原来分散的小分区拼接成一个大分区
  - 动态重定位：地址转换过程是程序执行期间随着对每条指令或数据的访问自动进行的

---

## 4. 分页存储管理方式

- 基本方法：
  - 页面和物理块
  - 地址结构
  - 页表
- 地址转换机构：
  - 地址转换是通过页表进行的

---

## 5. 分段存储管理方式

- 基本原理：
  - 分段
    - 作业的地址看见被划分为若干个段
  - 段表
  - 地址转换机构
- 分页和分段的区别：
  - 页是信息的物理单位
  - 页的大小固定且由系统决定，而段的大小不固定，由用户决定
  - 分页的用户程序地址空间是一维的，分段是二维的

---

## 6 段页式存储方式

- 基本原理：
  - 段页：
    - 先将用户程序分为若干段，再把每段分为若干页，并为每一个段赋予一个段名
  - 地址转换机制

---
