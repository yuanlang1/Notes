# 解答题

---

## 1. 为什么进程之间的通信必须借助于操作系统内核功能？

- 进程是竞争和分配计算机系统资源的基本单位。每个进程都有自己的独立地址空间，为了保证多个进程能够彼此互不干扰地共享物理内存，`OS`利用硬件地址机制对进程的地址空间进行了严格的保护，限制每个进程只能访问自己的地址空间。因此，进程之间的通信必须借助于OS内核功能。

---

## 2. 简单说明进程通信的几种主要方式

- 共享内存区
  - 通过系统调用创建共享内存区，多个进程可以（通过系统调用）连接同一个共享内存区，通过访问共享内存区实现进程之间的数据交换
- 消息传递
  - 通过发送/接收消息，系统调用实现进程之间的通信
- 管道系统
  - 管道是先进先出的信息流，允许多个进程向管道写入数据，允许多个进程从管道读出数据
- 共享文件
  - 利用OS提供的文件共享功能实现进程之间的通信

---

## 3. 从操作系统设计角度，谈谈`PCB`的作用？

- `PCB`是`OS`为每个进程定义的数据结构，能使一个在多道程序环境下不能独立运行的程序成为一个能独立运行的基本单位，一个能与其他进程并发执行的进程。
- `OS`通过`PCB`感知进程的存在，并根据PCB实施对进程的控制和管理，因此PCB是为了保证程序并发执行而创建的。

---

## 4. 在一个单`CPU`的多道程序设计系统中，若在某一时刻有N个进程同时存在，那么处于运行态、阻塞态和就绪态进程个数的最小值和最大值分别可能是多少？

![4](images/2023-12-18-16-25-54.png)

只要有一个就绪态，CPU就不会空闲，就会有运行态进程，因此，就绪态最大值为N-1。可能会存在所有进程均阻塞的情况。

---

## 5. 有了程序，为什么还要引入进程？

- 传统的程序如果并发执行，运行环境失去封闭性，运行过程的间断性，运行结果的不可再现性，这样程序的执行就失去了意义，为了程序能并发执行，为了对并发执行的程序加以描述和控制，必须引入进程。

---

## 6. 进程存在的唯一标志是什么？为什么？

- PCB是进程存在的唯一标志。
- PCB是进程实体的一部分，是操作系统中最重要的记录型数据结构，记录了`OS`所需的，用于描述进程当前情况以及管理进程运行状态的全部信息。
- 操作系统通过PCB感知进程的存在，通过PCB对进程进行操作和控制。
- 创建进程的时候，操作系统为该进程创建PCB，撤销进程的时候，PCB被撤销。

---

## 7. 有3个进程P1、P2和P3并发工作。进程P1需要资源S3和资源S1；进程P2需要资源S2和资源S1；进程P3需要资源S3和资源S2。问：（1）若对资源分配不加限制，会发生什么情况？为什么？（2）为保证进程正确运行，应采用怎样的分配策略？列出所有可能的方法

- 会发生死锁，三个进程有共享的资源，`p1，p2，p3`分别获得`s3，s1，s2`后再申请资源时，会出现循环等待
- 采用银行家算法，静态分配，按序分配

---

## 8. 请简要阐明时间片轮转调度算法的基本思想。请分析：（1）假设时间片的长度无限长，这时的时间片轮转调度算法具有什么样的特点？（2）假设时间片的长度无限缩短，这时的时间片轮转调度算法又具有什么样的特点？

- 如果时间片的长度无限长，即所有的进程在分配的时间片内都能完成，这时的时间片轮转调度算法会简化成先来先服务算法，对于短作业可能不利。进程响应时间比较长，不适合交互式作业的运行
- 假设时间片的长度无限缩短，这时的时间片轮转调度算法中，进程切换和进程调度会频繁发生，导致系统开销增大。对长作业运行不利

---

## 9. 死锁预防中采用什么方法来破坏“循环等待”条件？

- 采用“有序资源分配法”来破坏“循环等待”条件。有序资源分法是将系统中的所有资源按照类型进行排序编号，每个进程必须按照编号递增次序请求资源，同类资源一次性申请完

---

## 10. 死锁产生的根本原因和必要条件是什么？

- 死锁产生的原因：资源不足而竞争资源 、进程推进顺序不合理
- 必要条件是：互斥条件（资源独占）、不可剥夺条件、请求与保持条件(部分分配和占有申请)和循环等待条件

---

## 11. 进程之间存在着哪几种制约关系？各是什么原因引起的？下列活动分别属于哪种制约关系？

```c++
（1）若干同学去图书馆借书；
（2）两队举行篮球比赛；
（3）流水线生产的各道工序；
（4）商品生产和社会消费。
```

- 进程之间存在着直接制约和间接制约这两种制约关系
  - 直接制约（同步）是由于进程间的相互合作而引起的
  - 间接制约（互斥）则是由于进程间共享临界资源而引起的

```c++
（1）若干同学去图书馆借书是间接制约，其中书是临界资源。

（2）两队举行篮球比赛是间接制约，其中篮球是临界资源。

（3）流水线生产的各道工序是直接制约，各道工序间须要相互合作，每道工序的开始都依赖于前一道工序的完成。

（4）商品生产和社会消费是直接制约，两者须要相互合作。商品生产出来后才可以被消费，商品被消费后才须要再生产。
```

---

## 12. 利用信号量机制实现进程互斥时，对互斥信号量的wait()(P操作)和signal()(V操作)操作为什么要成对出现？

- `wait(mutex)` 和 `wait(mutex)`必须成对出现。
  - 缺少`wait(mutex)`将会系统混乱，无法保证对临界资源的互斥访问
  - 缺少`signal(mutex)`将会导致临界资源永远不会被释放，因此导致等待该资源而阻塞的进程不能被唤醒

---

## 13. 在什么情况下需要进行重定位？为什么要引入动态重定位？

- 由源程序经过编译、链接产生的装入模块一般总是从0开始编址的，其中的地址都是相对于起始地址的相对地址。在将装入模块装入内存时，分配到的内存空间起始地址通常不为0，因此指令和数据的实际物理地址与装入模块中的相对地址是不一致的。因此，为了使程序能够正确执行，必须将其中的相对地址转换成物理地址，即进行重定位。
- 进程在运行过程中经常要在内存中移动位置（如对换、紧凑），引入动态重定位的目的就是为了满足进程的这种需要。重定位的过程是由硬件地址变换机构在进程执行每条指令时自动完成的。

---

## 14. 为何段式管理有段内越界，而页式管理无页内越界问题？

- 由于每个段大小可能不同，段地址是二维的（段地址由段号，段内偏移量两个量描述）。若所给逻辑地址的段内偏移量超出了该段段长，则表示该地址不在该段内。因此分段存储管理方式内存保护采用基地址寄存器和限长寄存器的方式，在进行地址转换时，须要做越界检查，防止越界的发生。
- 分页是系统自动划分的，大小固定，因此给出的页内偏移量一定在页面内，不存在越界问题。

---

## 15. 在分页存储管理系统中，页表的主要作用是什么？

- 页表的主要作用是实现从页号到物理块号的地址映射。
- 为了便于在内存中快速找到每个页面对应的物理块号，系统为每一个进程都建立一张页表，页表中记录相应页在内存中对应的物理块号，页表通常保存在内存中。

---

## 16. 简述利用假脱机技术实现打印机共享的基本处理过程

- 由输出进程在输出井中为之申请一个空闲磁盘块区，并将要打 印的数据送入其中
- 如果打印机空闲，输出进程将从请求打印队列的队首取出一张请求打印表，根据表中的要求将要打印的数据，从输出井传送到内存缓冲区，再由打印机进行打印
- 打印完后，输出进程再查看请求打印队列中是否还有等待打印的请求表。若有，又取出队列中的第一张表，并根据其中的要求进行打印，输出进程才被唤醒。

---

## 17. 什么是逻辑设备？什么是物理设备？如何实现从逻辑设备到物理设备的转换？

- 逻辑设备：用户编程使用的设备；
- 物理设备：计算机系统实际配置的设备；
- 如何实现转换：通过系统设置的逻辑设备与物理设备的映射关系实现从逻辑设备到物理设备的转换。

---
