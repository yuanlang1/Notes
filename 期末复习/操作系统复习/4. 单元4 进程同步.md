# 进程同步

---

## 1. 概念

- 制约关系
  - 间接相互制约关系(互斥关系)：进程间共享临界资源而引起的
  - 直接相互制约关系(同步关系)：进程间的相互合作而引起的
- 临界资源：使用它们时都需要采用互斥方式
- 临界区问题：
  - 临界区：把在每个进程中访问的临界资源的那段代码称为临界区

---

## 2. 信号量机制

- 整数型信号量
  - 表示资源数目的整形量
  - `wait(S)`请求操作  `P`操作
  - `signal(S)`释放操作 `V`操作
- 记录型信号量
  - 除了一个用于代表资源数目的整形变量`value`外，还有增加了一个进程链表指针`list`
  - `wait(S)`申请时，如果`S->value < 0`说明该资源分配完毕，自我阻塞，并将进程插入信号量链表`S->list`中
  - `signal(S)`释放时，`S->value++`，如果`S->value <= 0`，唤醒`S->list`链表中的阻塞进程
- `AND`信号量
- 信号量集

---

## 3. 信号量的利用

- 实现进程互斥
  - 注意：
    - `wait(mutex)` 和 `wait(mutex)`必须成对出现。
    - 缺少`wait(mutex)`将会系统混乱，无法保证对临界资源的互斥访问
    - 缺少`signal(mutex)`将会导致临界资源永远不会被释放，因此导致等待该资源而阻塞的进程不能被唤醒
- 实现进程同步

---

## 4. 经典的进程同步问题

### 4.1 生产者 - 消费者问题

- 利用记录型信号量解决
- 利用`AND`信号量解决
- 利用管程解决

## 4.2 哲学家进餐问题

- 利用记录型信号量解决
- 利用`AND`信号量解决

## 4.3 写者 - 读者问题

当一个进程读时，其他进程不能写，相反也是

- 利用记录型信号量解决
- 利用信号量集解决

---
