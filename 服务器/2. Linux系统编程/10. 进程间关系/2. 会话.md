# 会话

- [会话](#会话)
  - [1. 创建会话](#1-创建会话)
  - [2. 查看会话](#2-查看会话)

可以用来脱离控制终端

每个`bash`对应一个会话，最多只有一个控制终端，该终端被会话中所有进程组的进程共享

---

## 1. 创建会话

```c
pid_t setsid(void)
```

**限制条件**：

- 调用进程不能为进程组组长，该进程变成新会话首进程
- 该进程为一个新进程组的组长进程
- 需要`root`权限
- 新会话丢弃原有的控制终端，该会话没有控制终端
- 调用进程为组长进程，则出错放回0
- 建立新会话时，先调用`fork`，父进程终止，子进程调用

即：调用`setsid`的进程必须为非组长进程，创建新会话成功后，该进程为新进程组的组长进程，
会话创建成功后，丢弃之前终端，没有控制终端

---

## 2. 查看会话

```c
pid_t getsid(pid_t pid);
```

`pid = 0`表示查看当前进程的`session ID`

---
